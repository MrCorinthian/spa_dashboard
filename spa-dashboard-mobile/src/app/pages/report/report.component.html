<h1>Report</h1>
<div class="flex__column">
  <div class="side__container">
    <div class="column__container">
      <div class="filter__container">
        <div class="heard__field">Period (From - To)</div>
        <daterangepicker
          placeholder="Period (From - To)"
          [value]="filter.periodFromTo"
          (onChange)="onChangeFilter('filterPeriod', $event)"
        ></daterangepicker>
        <div class="heard__field">Type of usage</div>
        <autocomplete
          *ngIf="companyTypeOfUsages.length > 0"
          placeholder="Type of usage"
          [value]="filter.companyTypeOfUsage"
          [options]="companyTypeOfUsages"
          [sortOption]="false"
          (onChange)="onChangeFilter('filterCompanyTypeOfUsages', $event)"
        ></autocomplete>
        <div class="heard__field">First name</div>
        <input-text
          placeholder="First name"
          [value]="filter.firstName"
          (onChange)="onChangeFilter('filterFirstName', $event)"
        ></input-text>
        <div class="heard__field">Last name</div>
        <input-text
          placeholder="Last name"
          [value]="filter.lastName"
          (onChange)="onChangeFilter('filterLastName', $event)"
        ></input-text>
      </div>
      <div class="filter__container">
        <div class="heard__field">Company name</div>
        <input-text
          placeholder="Company name"
          [value]="filter.companyName"
          (onChange)="onChangeFilter('filterCompanyName', $event)"
        ></input-text>
        <div class="heard__field">Telephone no.</div>
        <input-text
          placeholder="Telephone no."
          [value]="filter.phone"
          (onChange)="onChangeFilter('filterPhone', $event)"
        ></input-text>
        <div *ngIf="tiers.length > 0" class="heard__field">Tier</div>
        <autocomplete
          *ngIf="tiers.length > 0"
          placeholder="Tier"
          [value]="filter.tierName"
          [options]="tiers"
          [sortOption]="false"
          (onChange)="onChangeFilter('filterTierName', $event)"
        ></autocomplete>
        <div *ngIf="branches.length > 0" class="heard__field">Location</div>
        <autocomplete
          *ngIf="branches.length > 0"
          placeholder="Location"
          [value]="filter.branchName"
          [options]="branches"
          [sortOption]="false"
          (onChange)="onChangeFilter('filterBranchName', $event)"
        ></autocomplete>
      </div>
      <div class="filter__container">
        <button
          [style.backgroundColor]="colors.greenPrimary"
          (click)="getDataTable(1)"
        >
          Search
        </button>
      </div>
      <table>
        <thead>
          <tr>
            <th>No.</th>
            <th>Date/Time</th>
            <th>First name</th>
            <th>Family name</th>
            <th>Company name</th>
            <th>Telephone no.</th>
            <th>Tier</th>
            <th>Commission</th>
            <th>Location</th>
            <th>Transaction id</th>
          </tr>
        </thead>
        <tbody *ngIf="dataTable.length > 0">
          <tr *ngFor="let item of dataTable; let i = index" class="tr__option">
            <td class="td__center">
              {{ (currentIndex - 1) * rowPerPage + i + 1 }}
            </td>
            <td class="td__center">
              {{ dateFormat(item.Created, "DD/MM/YYYY HH:mm") }}
            </td>
            <td class="td__center">{{ item.FirstName }}</td>
            <td class="td__center">{{ item.LastName }}</td>
            <td class="td__center">{{ item.CompanyName }}</td>
            <td class="td__center">{{ format("phone", item.PhoneNumber) }}</td>
            <td class="td__center">{{ item.Tier }}</td>
            <td class="td__center">{{ item.Commission | number : "1.2-2" }}</td>
            <td class="td__center">
              {{ item.BranchName }}
            </td>
            <td class="td__center">
              {{ item.Id }}
            </td>
          </tr>
        </tbody>
      </table>
      <div class="table__pagination">
        <img
          class="img__icon"
          src="../Content/AngularViews/assets/images/angle-left.png"
          [width]="20"
          (click)="previousPage()"
        />
        <div
          *ngIf="currentIndex > 3"
          class="page__index"
          (click)="getDataTable(1)"
        >
          {{ 1 }}
        </div>
        <div *ngIf="currentIndex > 3" class="page__skip">. . .</div>
        <div *ngIf="currentIndex"></div>
        <div *ngFor="let item of indexTable">
          <div
            *ngIf="currentIndex === item; else pageOption"
            class="page__index"
            [style.color]="colors.greenPrimary"
            [style.cursor]="'default'"
            (click)="getDataTable(item)"
          >
            {{ item }}
          </div>
          <ng-template #pageOption>
            <div
              *ngIf="
                (item >= currentIndex - 2 && item < currentIndex) ||
                (item <= currentIndex + 2 && item > currentIndex)
              "
              class="page__index"
              (click)="getDataTable(item)"
            >
              {{ item }}
            </div>
          </ng-template>
        </div>
        <div *ngIf="currentIndex < indexTable.length - 2" class="page__skip">
          . . .
        </div>
        <div
          *ngIf="currentIndex < indexTable.length - 2"
          class="page__index"
          (click)="getDataTable(indexTable[indexTable.length - 1])"
        >
          {{ indexTable[indexTable.length - 1] }}
        </div>
        <img
          class="img__icon"
          src="../Content/AngularViews/assets/images/angle-right.png"
          [width]="20"
          (click)="nextPage()"
        />
      </div>
    </div>
  </div>
</div>
